/* slideswap v1.0.0 | https://stamat.github.io/slideswap/ | MIT License */
(()=>{function I(t,e){for(const i in e)t[i]=e[i];return t}function b(t,e){!t||!e||t.parentNode.insertBefore(e,t)}function T(t){const i=new RegExp("([0-9.]+)([a-z]+)","i").exec(t);if(!i)return 0;switch(i[2]){case"ms":return parseFloat(i[1]);case"s":return parseFloat(i[1])*1e3;default:return 0}}function m(t){const e=getComputedStyle(t),i=e.getPropertyValue("transition-property").split(","),r=e.getPropertyValue("transition-duration").split(","),s={};for(let n=0;n<i.length;n++){const l=i[n].trim();s[l]=r.hasOwnProperty(n)?T(r[n].trim()):null}return s}function C(t,e,i=150,r=0){let s=0,n=0,l=0,a=0,u=0,f=0;if(!t||t.getAttribute("swipe-enabled")==="true")return;t.setAttribute("swipe-enabled","true");const p=function(o){const h=o.touches?o.touches[0]:o;s=h.clientX,n=h.clientY,u=Date.now(),t.dispatchEvent(new CustomEvent("swipestart",{detail:{startX:s,startY:n,startTime:u}}))},c=function(o){const h=o.changedTouches?o.changedTouches[0]:o;l=h.clientX,a=h.clientY,f=Date.now(),L(),t.dispatchEvent(new CustomEvent("swipeend",{detail:{startX:s,startY:n,startTime:u,endX:l,endY:a,endTime:f}}))},L=function(){const o=Math.abs(l-s),h=Math.abs(a-n),w=o>i,x=h>i,y=l<s,S=a<n,d=[],E=f-u;w&&d.push(y?"left":"right"),x&&d.push(S?"up":"down");let g=d.length&&e;if(r&&(g=g&&E<=r),g){const v={target:t,deltaX:o,deltaY:h,startX:s,startY:n,endX:l,endY:a,threshold:i,horizontal:w,vertical:x,horizontalDirection:y?"left":"right",verticalDirection:S?"up":"down",direction:d.length===1?d[0]:d,timeElapsed:E,timeThreshold:r};e(v),delete v.target,t.dispatchEvent(new CustomEvent("swipe",{detail:v}))}};return t.addEventListener("touchstart",p),t.addEventListener("touchend",c),t.addEventListener("mousedown",p),t.addEventListener("mouseup",c),{destroy:function(){t.removeEventListener("touchstart",p),t.removeEventListener("touchend",c),t.removeEventListener("mousedown",p),t.removeEventListener("mouseup",c)}}}var H=class{constructor(t,e){this.init(t,e)}init(t,e){if(this.element=t,this.currentIndex=0,this.slides=null,this.maxHeight=0,this.options={infinite:!1,activeClass:"slideswap-current-slide",slideSelector:".js-slideswap",start:0,adaptiveHeight:!0,next:null,prev:null,imageSelector:".js-slideswap-image",swipe:!0,swipeClass:"slideswap-has-swipe",swipeActiveClass:"slideswap-swipe-active",swipeThreshold:100,swipeTimeThreshold:1e3},typeof t=="string"&&(this.element=document.querySelector(t)),!this.element||!(this.element instanceof HTMLElement))throw new Error("slideswap: element property not provided, or element not found");if(this.element.getAttribute("data-slideswap-initialized")==="true")throw new Error("slideswap: element already initialized");this.transitionHeightDuration=m(this.element).height||0,this.transitionHeightTimer=null,this.transitionSlideDuration=0,this.transitionSlideTimer=null,I(this.options,e),this.bindControls(),this.slides=this.element.querySelectorAll(this.options.slideSelector),this.setCurrentSlide(this.options.start),this.element.setAttribute("data-slideswap-initialized","true"),this.setupSlides(),this.options.swipe&&this.setupSwipe(),this.dispatchEvent("init")}setupSwipe(){this.swipe=C(this.element,t=>{t.horizontal&&(t.horizontalDirection==="left"?this.next():this.previous())},this.options.swipeThreshold,this.options.swipeTimeThreshold),this.element.addEventListener("swipestart",this.onSwipeStart.bind(this)),this.element.addEventListener("swipeend",this.onSwipeEnd.bind(this)),this.element.classList.add(this.options.swipeClass)}onSwipeStart(){this.element.classList.add(this.options.swipeActiveClass)}onSwipeEnd(){this.element.classList.remove(this.options.swipeActiveClass)}bindControls(){!this.options.next&&!this.options.prev||(this.options.next=typeof this.options.next=="string"?document.querySelector(this.options.next):this.options.next,this.options.prev=typeof this.options.prev=="string"?document.querySelector(this.options.prev):this.options.prev,this.options.next&&this.options.next.addEventListener("click",this.next.bind(this)),this.options.prev&&this.options.prev.addEventListener("click",this.previous.bind(this)))}setupSlides(){if(!(!this.slides||!this.slides.length)){for(let t=0;t<this.slides.length;t++){const e=this.slides[t];if(e.setAttribute("data-slideswap-index",t),this.maxHeight=Math.max(this.maxHeight,e.offsetHeight),e.style.top=0,e.style.left=0,e.style.width="100%",e.style.height="auto",e.style.overflow="hidden",t===this.currentIndex?e.style.position="relative":(e.style.position="absolute",e.style.opacity=0,e.style.pointerEvents="none"),this.options.swipe){const i=e.querySelectorAll("img");for(let r=0;r<i.length;r++){const s=i[r];s.draggable=!1,s.setAttribute("draggable","false")}}}this.options.adaptiveHeight||(this.element.style.height=`${this.maxHeight}px`),this.transitionSlideDuration=m(this.getCurrentSlide()).opacity||0}}setCurrentSlide(t){if(!this.slides||!this.slides.length||(this.transitionHeightTimer&&(clearTimeout(this.transitionHeightTimer),this.transitionHeightTimer=null),this.transitionSlideTimer&&(clearTimeout(this.transitionSlideTimer),this.transitionSlideTimer=null),t==null)||t<0||t>=this.slides.length)return;this.options.adaptiveHeight&&(this.element.style.height=`${this.slides[this.currentIndex].offsetHeight}px`);const e=this.currentIndex;t!==e&&this.dispatchEvent("beforechange",{index:t,previousIndex:e}),this.currentIndex=t,this.element.setAttribute("data-slideswap-current-index",this.currentIndex);const i=this.slides[t];i.classList.add(this.options.activeClass),i.removeAttribute("aria-hidden"),i.setAttribute("tabindex","0"),i.style.zIndex=1,i.style.opacity=1,i.style.pointerEvents="auto",i.style.position="absolute";let r=!1;if(this.options.adaptiveHeight){this.element.style.height=`${i.offsetHeight}px`;let s=i.querySelector(this.options.imageSelector);s||(s=i.querySelector("img")),s&&s.addEventListener("load",()=>{r||(this.element.style.height=`${i.offsetHeight}px`)}),this.transitionHeightTimer=setTimeout(()=>{i.style.position="relative",this.element.style.height="initial",r=!0,this.transitionHeightTimer=null},this.transitionHeightDuration)}this.transitionSlideTimer=setTimeout(()=>{this.transitionSlideTimer=null,t!==e&&this.dispatchEvent("change",{index:t,previousIndex:e})},this.transitionSlideDuration);for(let s=0;s<this.slides.length;s++){const n=this.slides[s];s!==t&&(n.classList.remove(this.options.activeClass),n.setAttribute("aria-hidden","true"),n.setAttribute("tabindex","-1"),n.style.zIndex=0,n.style.opacity=0,n.style.pointerEvents="none",n.style.position="absolute")}}dispatchEvent(t,e={}){if(!this.slides||!this.slides.length)return;const i=new CustomEvent(`slideswap:${t}`,{detail:{...e,slideswap:this}});this.element.dispatchEvent(i),document.dispatchEvent(i)}getCurrentIndex(){if(!(!this.slides||!this.slides.length))return this.currentIndex}getCurrentSlide(){if(!(!this.slides||!this.slides.length))return this.slides[this.currentIndex]}getNextIndex(){if(!this.slides||!this.slides.length)return;const t=this.currentIndex+1;return this.options.infinite&&t>=this.slides.length?0:t>=this.slides.length?this.currentIndex:t}getPreviousIndex(){if(!this.slides||!this.slides.length)return;const t=this.currentIndex-1;return this.options.infinite&&t<0?this.slides.length-1:t<0?this.currentIndex:t}next(){this.setCurrentSlide(this.getNextIndex())}previous(){this.setCurrentSlide(this.getPreviousIndex())}destroy(){this.dispatchEvent("destroy",{element:this.element,slides:this.slides,options:this.options,currentIndex:this.currentIndex,maxHeight:this.maxHeight}),this.element=null,this.slides=null,this.options=null,this.currentIndex=null,this.maxHeight=null,this.options.next&&this.options.next.removeEventListener("click",this.next.bind(this)),this.options.prev&&this.options.prev.removeEventListener("click",this.previous.bind(this)),this.options.swipe&&this.swipe.destroy(),this.swipe=null,this.element.removeEventListener("swipestart",this.onSwipeStart.bind(this)),this.element.removeEventListener("swipeend",this.onSwipeEnd.bind(this))}add(t,e){if(!(!t||!(t instanceof HTMLElement))&&(this.slides||(this.slides=[]),e==null&&(e=this.slides.length),!(e<0))){if(t.style.opacity=0,e>this.slides.length?this.element.appendChild(t):this.slides[e]?b(this.slides[e],t):this.element.appendChild(t),this.slides=this.element.querySelectorAll(this.options.slideSelector),e<=this.currentIndex){const i=this.currentIndex+1;this.currentIndex=i>=this.slides.length?this.slides.length-1:i}this.setupSlides(),this.setCurrentSlide(this.currentIndex)}}remove(t){if(!(!this.slides||!this.slides.length)){if(this.element.removeChild(this.slides[t]),this.slides=this.element.querySelectorAll(this.options.slideSelector),t<=this.currentIndex){const e=this.currentIndex-1;this.currentIndex=e<0?0:e}this.setupSlides(),this.setCurrentSlide(this.currentIndex)}}};window.Slideswap||(window.Slideswap=H)})();
