/* slideswap v1.0.0 | https://stamat.github.io/slideswap/ | MIT License */
(()=>{function E(t,e){for(const s in e)t[s]=e[s];return t}function b(t){const s=new RegExp("([0-9.]+)([a-z]+)","i").exec(t);if(!s)return 0;switch(s[2]){case"ms":return parseFloat(s[1]);case"s":return parseFloat(s[1])*1e3;default:return 0}}function C(t){const e=getComputedStyle(t),s=e.getPropertyValue("transition-property").split(","),n=e.getPropertyValue("transition-duration").split(","),i={};for(let o=0;o<s.length;o++){const h=s[o].trim();i[h]=n.hasOwnProperty(o)?b(n[o].trim()):null}return i}function L(t,e,s=150,n=0){let i=0,o=0,h=0,d=0,p=0,f=0;if(!t||t.getAttribute("swipe-enabled")==="true")return;t.setAttribute("swipe-enabled","true");const u=function(r){const l=r.type==="touchstart"?r.touches[0]:r;i=l.clientX,o=l.clientY,p=Date.now(),t.dispatchEvent(new CustomEvent("swipestart",{detail:{startX:i,startY:o,startTime:p}}))},c=function(r){const l=r.type==="touchend"?r.touches[0]:r;h=l.clientX,d=l.clientY,f=Date.now(),T(),t.dispatchEvent(new CustomEvent("swipeend",{detail:{startX:i,startY:o,startTime:p,endX:h,endY:d,endTime:f}}))},T=function(){const r=Math.abs(h-i),l=Math.abs(d-o),m=r>s,w=l>s,y=h<i,x=d<o,a=[],S=f-p;m&&a.push(y?"left":"right"),w&&a.push(x?"up":"down");let v=a.length&&e;if(n&&(v=v&&S<=n),v){const g={target:t,deltaX:r,deltaY:l,startX:i,startY:o,endX:h,endY:d,threshold:s,horizontal:m,vertical:w,horizontalDirection:y?"left":"right",verticalDirection:x?"up":"down",direction:a.length===1?a[0]:a,timeElapsed:S,timeThreshold:n};e(g),delete g.target,t.dispatchEvent(new CustomEvent("swipe",{detail:g}))}};return t.addEventListener("touchstart",u),t.addEventListener("touchend",c),t.addEventListener("mousedown",u),t.addEventListener("mouseup",c),{destroy:function(){t.removeEventListener("touchstart",u),t.removeEventListener("touchend",c),t.removeEventListener("mousedown",u),t.removeEventListener("mouseup",c)}}}var I=class{constructor(t,e){if(this.element=t,this.currentIndex=0,this.slides=null,this.maxHeight=0,this.options={infinite:!1,activeClass:"slideswap-current-slide",slideSelector:".js-slideswap",start:0,adaptiveHeight:!0,next:null,prev:null,imageSelector:".js-slideswap-image",swipe:!0,swipeClass:"slideswap-has-swipe",swipeActiveClass:"slideswap-swipe-active",swipeThreshold:100,swipeTimeThreshold:1e3},typeof t=="string"&&(this.element=document.querySelector(t)),!this.element||!(this.element instanceof HTMLElement))throw new Error("slideswap: element property not provided, or element not found");if(this.element.getAttribute("data-slideswap-initialized")==="true")throw new Error("slideswap: element already initialized");this.transitionDuration=C(this.element),this.transitionTimer=null,E(this.options,e),this.bindControls(),this.slides=this.element.querySelectorAll(this.options.slideSelector),this.setCurrentSlide(this.options.start),this.element.setAttribute("data-slideswap-initialized","true"),this.setupSlides(),this.options.swipe&&this.setupSwipe()}setupSwipe(){L(this.element,t=>{t.horizontal&&(t.horizontalDirection==="left"?this.next():this.previous())},this.options.swipeThreshold,this.options.swipeTimeThreshold),this.element.addEventListener("swipestart",()=>{this.element.classList.add(this.options.swipeActiveClass)}),this.element.addEventListener("swipeend",()=>{this.element.classList.remove(this.options.swipeActiveClass)}),this.element.classList.add(this.options.swipeClass)}bindControls(){!this.options.next&&!this.options.prev||(this.options.next=typeof this.options.next=="string"?document.querySelector(this.options.next):this.options.next,this.options.prev=typeof this.options.prev=="string"?document.querySelector(this.options.prev):this.options.prev,this.options.next&&this.options.next.addEventListener("click",this.next.bind(this)),this.options.prev&&this.options.prev.addEventListener("click",this.previous.bind(this)))}setupSlides(){for(let t=0;t<this.slides.length;t++){const e=this.slides[t];if(e.setAttribute("data-slideswap-index",t),this.maxHeight=Math.max(this.maxHeight,e.offsetHeight),e.style.top=0,e.style.left=0,e.style.width="100%",e.style.height="auto",e.style.overflow="hidden",t===this.currentIndex?e.style.position="relative":(e.style.position="absolute",e.style.opacity=0,e.style.pointerEvents="none"),this.options.swipe){const s=e.querySelectorAll("img");for(let n=0;n<s.length;n++){const i=s[n];i.draggable=!1,i.setAttribute("draggable","false")}}}this.options.adaptiveHeight||(this.element.style.height=`${this.maxHeight}px`)}setCurrentSlide(t){if(t<0||t>=this.slides.length)return;this.options.adaptiveHeight&&(this.element.style.height=`${this.slides[this.currentIndex].offsetHeight}px`),this.currentIndex=t;const e=this.slides[t];e.classList.add(this.options.activeClass),e.removeAttribute("aria-hidden"),e.setAttribute("tabindex","0"),e.style.zIndex=1,e.style.opacity=1,e.style.pointerEvents="auto",e.style.position="absolute";let s=!1;if(this.options.adaptiveHeight){this.element.style.height=`${e.offsetHeight}px`;const n=this.getCurrentSlide().querySelector(this.options.imageSelector);n&&n.addEventListener("load",()=>{s||(this.element.style.height=`${e.offsetHeight}px`)}),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null);const i=new Date().getTime();this.transitionTimer=setTimeout(()=>{e.style.position="relative",this.element.style.height="initial",s=!0,this.transitionTimer=null},this.transitionDuration.height)}for(let n=0;n<this.slides.length;n++){const i=this.slides[n];n!==t&&(i.classList.remove(this.options.activeClass),i.setAttribute("aria-hidden","true"),i.setAttribute("tabindex","-1"),i.style.zIndex=0,i.style.opacity=0,i.style.pointerEvents="none",i.style.position="absolute")}}getCurrentIndex(){return this.currentIndex}getCurrentSlide(){return this.slides[this.currentIndex]}getNextIndex(){return this.options.infinite?(this.currentIndex+1)%this.slides.length:this.currentIndex+1}getPreviousIndex(){return this.options.infinite?(this.currentIndex-1+this.slides.length)%this.slides.length:this.currentIndex-1}next(){this.setCurrentSlide(this.getNextIndex())}previous(){this.setCurrentSlide(this.getPreviousIndex())}destroy(){this.element=null,this.slides=null,this.options=null,this.currentIndex=null,this.maxHeight=null,this.options.next&&this.options.next.removeEventListener("click",this.next.bind(this)),this.options.prev&&this.options.prev.removeEventListener("click",this.previous.bind(this))}addSlide(t){this.element.appendChild(t),this.slides=this.element.querySelectorAll(`.${this.options.slideClass}`),this.setupSlides()}removeSlide(t){this.element.removeChild(this.slides[t]),this.slides=this.element.querySelectorAll(`.${this.options.slideClass}`),this.currentIndex>=this.slides.length&&this.setCurrentSlide(this.slides.length-1),this.setupSlides()}};window.Slideswap||(window.Slideswap=I)})();
