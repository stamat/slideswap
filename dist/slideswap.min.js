/* slideswap v1.0.0 | https://stamat.github.io/slideswap/ | MIT License */
(()=>{function o(e,t){for(const i in t)e[i]=t[i];return e}function l(e){const i=new RegExp("([0-9.]+)([a-z]+)","i").exec(e);if(!i)return 0;switch(i[2]){case"ms":return parseFloat(i[1]);case"s":return parseFloat(i[1])*1e3;default:return 0}}function h(e){const t=getComputedStyle(e),i=t.getPropertyValue("transition-property").split(","),s=t.getPropertyValue("transition-duration").split(","),n={};for(let r=0;r<i.length;r++){const a=i[r].trim();n[a]=s.hasOwnProperty(r)?l(s[r].trim()):null}return n}var d=class{constructor(e,t){if(this.element=e,this.currentIndex=0,this.slides=null,this.maxHeight=0,this.options={infinite:!1,activeClass:"slideswap-current-slide",slideClass:"js-slideswap",start:0,adaptiveHeight:!0,next:null,prev:null,imageClass:"js-slideswap-image"},typeof e=="string"&&(this.element=document.querySelector(e)),!this.element||!(this.element instanceof HTMLElement))throw new Error("slideswap: element property not provided, or element not found");if(this.element.getAttribute("data-slideswap-initialized")==="true")throw new Error("slideswap: element already initialized");this.transitionDuration=h(this.element),this.transitionTimer=null,o(this.options,t),this.bindControls(),this.slides=this.element.querySelectorAll(`.${this.options.slideClass}`),this.setCurrentSlide(this.options.start),this.element.setAttribute("data-slideswap-initialized","true"),this.setupSlides()}bindControls(){!this.options.next&&!this.options.prev||(this.options.next=typeof this.options.next=="string"?document.querySelector(this.options.next):this.options.next,this.options.prev=typeof this.options.prev=="string"?document.querySelector(this.options.prev):this.options.prev,this.options.next&&this.options.next.addEventListener("click",this.next.bind(this)),this.options.prev&&this.options.prev.addEventListener("click",this.previous.bind(this)))}setupSlides(){for(let e=0;e<this.slides.length;e++){const t=this.slides[e];t.setAttribute("data-slideswap-index",e),this.maxHeight=Math.max(this.maxHeight,t.offsetHeight),t.style.top=0,t.style.left=0,t.style.width="100%",t.style.height="auto",t.style.overflow="hidden",e===this.currentIndex?t.style.position="relative":(t.style.position="absolute",t.style.opacity=0,t.style.pointerEvents="none")}this.options.adaptiveHeight||(this.element.style.height=`${this.maxHeight}px`)}setCurrentSlide(e){if(e<0||e>=this.slides.length)return;this.options.adaptiveHeight&&(this.element.style.height=`${this.slides[this.currentIndex].offsetHeight}px`),this.currentIndex=e;const t=this.slides[e];t.classList.add(this.options.activeClass),t.removeAttribute("aria-hidden"),t.setAttribute("tabindex","0"),t.style.zIndex=1,t.style.opacity=1,t.style.pointerEvents="auto",t.style.position="absolute";let i=!1;if(this.options.adaptiveHeight){this.element.style.height=`${t.offsetHeight}px`;const s=this.getCurrentSlide().querySelector(`.${this.options.imageClass}`);s&&s.addEventListener("load",()=>{i||(this.element.style.height=`${t.offsetHeight}px`)}),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null);const n=new Date().getTime();this.transitionTimer=setTimeout(()=>{t.style.position="relative",this.element.style.height="initial",i=!0,this.transitionTimer=null},this.transitionDuration.height)}for(let s=0;s<this.slides.length;s++){const n=this.slides[s];s!==e&&(n.classList.remove(this.options.activeClass),n.setAttribute("aria-hidden","true"),n.setAttribute("tabindex","-1"),n.style.zIndex=0,n.style.opacity=0,n.style.pointerEvents="none",n.style.position="absolute")}}getCurrentIndex(){return this.currentIndex}getCurrentSlide(){return this.slides[this.currentIndex]}getNextIndex(){return this.options.infinite?(this.currentIndex+1)%this.slides.length:this.currentIndex+1}getPreviousIndex(){return this.options.infinite?(this.currentIndex-1+this.slides.length)%this.slides.length:this.currentIndex-1}next(){this.setCurrentSlide(this.getNextIndex())}previous(){this.setCurrentSlide(this.getPreviousIndex())}destroy(){this.element=null,this.slides=null,this.options=null,this.currentIndex=null,this.maxHeight=null,this.options.next&&this.options.next.removeEventListener("click",this.next.bind(this)),this.options.prev&&this.options.prev.removeEventListener("click",this.previous.bind(this))}addSlide(e){this.element.appendChild(e),this.slides=this.element.querySelectorAll(`.${this.options.slideClass}`),this.setupSlides()}removeSlide(e){this.element.removeChild(this.slides[e]),this.slides=this.element.querySelectorAll(`.${this.options.slideClass}`),this.currentIndex>=this.slides.length&&this.setCurrentSlide(this.slides.length-1),this.setupSlides()}};window.Slideswap||(window.Slideswap=d)})();
